{%if 'username' not in session%}
     {% extends "layout.html" %}
{%else%}
     {% extends "loginlayout.html" %}
{% endif %}



{% block content %}

 <html>
  <head>
    <title> Title </title>
  </head>
  
<style>
.button {
    background-color: #4CA050;
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
}
</style>

   {% if error %}
      <p style="color:red"><strong>Error:</strong> <b>{{ error }}</b>
      {% endif %}
	  {% if logout %}
      <p style="color:Blue"><strong></strong> <b>{{ logout }}</b>
      {% endif %}
	  {% if success %}
      <p style="color:Blue"><strong></strong> <b>{{ success }}</b>
      {% endif %}
  <body> 
  {% with messages = get_flashed_messages() %}
         {% if messages %}
            <ul>
               {% for message in messages %}
               <li><{{ message }}</li>
               {% endfor %}
            </ul>
         {% endif %}
      {% endwith %}
    <div class="jumbo">
	
    <h2>Welcome to the SFPY LightningOut app<h2>
    <h3>This is the home page for the SFPY app<h3>
	{{authToken}}
  </div>
  <form  method="post" align="center" > 
	  <input type="submit" value="ConnectToSalesforce" class="button"  />
	  
	 </form>
	    
	    <div id="container"></div>
	  <script src="https://mylightningdomaintrainee-dev-ed.lightning.force.com/lightning/lightning.out.js"></script>
	  <script type="text/javascript">
		  $(document).ready(function(){
    

                var data = String({{authToken}});
		  //var authToken={{authToken}};
		  alert(data);
    $Lightning.use("c:schemaTestApp",    // name of the Lightning app
        function() {                  // Callback once framework and app loaded
            $Lightning.createComponent(
                "c:schamaObjects", // top-level component of your app
                { },                  // attributes to set on the component when created
                "container",   // the DOM location to insert the component
                
            );
        },
        'https://mylightningdomaintrainee-dev-ed.my.salesforce.com','Bearer '+data // Community endpoint
    );
		  });
</script>

	
  </body>
</html>
  
</body>
{% endblock %}
